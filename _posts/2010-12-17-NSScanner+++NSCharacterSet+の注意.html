---
title: NSScanner + NSCharacterSet の注意
date: 2010-12-17
tags: iOS NSString
layout: post
---

		<div class="section">
			<p>NSScanner と NSCharacterSet の注意点。iOS 4 前と以後では４バイト文字の扱いが異なりスキャンしてくれない。４バイト文字を扱う場合は気をつけて利用すること。</p>
<pre class="syntax-highlight">
NSString *key = <span class="synConstant">@&#34;?&#34;</span>; <span class="synComment">//? を４バイト文字にする</span>
NSCharacterSet *cSet = [NSCharacterSet characterSetWithCharactersInString:key];
NSScanner *scanner = [NSScanner scannerWithString:[<span class="synConstant">@&#34;絵文字&#34;</span> stringByAppendingString:key]];

[scanner scanUpToCharactersFromSet:set intoString:<span class="synConstant">nil</span>];
<span class="synStatement">if</span>([scanner scanCharactersFromSet:set intoString:<span class="synConstant">nil</span>]){
    NSLog(<span class="synConstant">@&#34;Hit!&#34;</span>);
}
</pre>

			<p>iOS4 より前だとヒットしない。</p>
		</div>

