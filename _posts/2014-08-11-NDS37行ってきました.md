---
layout: post
title: NDS37è¡Œã£ã¦ãã¾ã—ãŸ
date: 2014-08-11
tags: nds
---

é•·å²¡ITé–‹ç™ºè€…å‹‰å¼·ä¼šç¬¬37å›ã€Œä¸¦è¡Œãƒ»ä¸¦åˆ—å‡¦ç†ã€(http://nagaoka.techtalk.jp/no37) ã«å‚åŠ ã—ã¦ãã¾ã—ãŸã€‚

è³‡æ–™é–“ã«åˆã‚ãªãã¦ã”ã‚ã‚“ãªã•ã„ã€‚ã¾ã¨ã‚ãã‚Œãªãã¦ç›´å‰ã«å†…å®¹å¤‰æ›´ã—ã¦ã—ã¾ã„ã¾ã—ãŸã€‚
ç™ºè¡¨è³‡æ–™ã¯ã‚¯ã‚½ãªã®ã§å‡ºã—ã¾ã›ã‚“ãŒã€ç™ºè¡¨ã«ä½¿ã£ãŸã‚³ãƒ¼ãƒ‰ãã‚‰ã„ã¯ã•ã‚‰ã—ã¦ãŠã“ã†ã¨æ€ã„ã¾ã™ã€‚https://github.com/dictav/LearningThread


ä»Šå›ã®ç™ºè¡¨ã¯ã„ãšã‚Œã‚‚é¢ç™½ã‹ã£ãŸã®ã§ã™ãŒã€ã€ŒAkka ã‚’ä½¿ã£ã¦ã‚¢ã‚¯ã‚¿ãƒ¼ã§å¹³è¡Œå‡¦ç†ã€ã€ŒC#ã‚’ä½¿ã£ã¦éåŒæœŸã®ãªã«ã‹ ã€ãŒé¢ç™½ã‹ã£ãŸã®ã§ã¨ã‚Šã‚ã’ãŸã„ã€‚

## Akka ã®ç™ºè¡¨ãŒã¨ã¦ã‚‚ã™ã°ã‚‰ã—ã‹ã£ãŸ
çŒ«å‹ã•ã‚“ãŒ Scala ã® Akka ã®è©±ã‚’ã—ã¦ãã‚Œã¾ã—ãŸã€‚
è³‡æ–™ã¯ã“ã¡ã‚‰

ã€Œconcurrency programming with Akkaã€https://speakerdeck.com/shinpeim/concurrency-programming-with-akka

### ï¼“éƒ¨æ§‹æˆã™ã”ã„
çŒ«å‹ã•ã‚“ã¯ï¼‘äººç›®ã®ç™ºè¡¨è€…ã¨ã„ã†ã“ã¨ã§ã€ç¬¬ï¼‘éƒ¨ã§ä¸¦è¡Œå‡¦ç†ã«ã¤ã„ã¦è§¦ã‚Œã¦ãã‚Œã¦ã„ã¾ã™ã€‚ã‚ã‚ŠãŒãŸã„ã§ã™ã­ã€‚

ï¼’éƒ¨ï¼“éƒ¨ã¯ Akka ã«ã¨ã‚¢ã‚¯ã‚¿ãƒ¼ãƒ¢ãƒ‡ãƒ«ã«ã¤ã„ã¦ã§ã™ã€‚
ã‚¢ã‚¯ã‚¿ãƒ¼ãƒ¢ãƒ‡ãƒ«ã¯é¢ç™½ã„ã§ã™ã­ã€‚
ã¼ãã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã ã¨GoF ã®Delegate Pattern ã«éåŒæœŸã¨Mailboxã‚’çµ„ã¿åˆã‚ã›ãŸæ„Ÿã˜ã€‚
ã“ã†æ›¸ãã¨ãªã‚“ã ã‹å®Ÿè£…ã§ããã†ãªæ°—ãŒã™ã‚‹ã€‚ ğŸ»ã®ã‚µãƒ³ãƒ—ãƒ«ã‚’ Swift ã§å®Ÿè£…ã—ã¦ã¿ã‚ˆã†ã‹ãªãƒ¼ã€‚

Akkaã¯Scalaé™å®šã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã ã¨å‹˜é•ã„ã—ã¦ã„ãŸã‚“ã§ã™ãŒã€Javaã‹ã‚‰åˆ©ç”¨ã§ãã‚‹ã‚“ã§ã™ã­ã€‚
ã™ã”ã„ã§ã™ã€‚
ã€ŒAndroidã§å‹•ãã¾ã™ã‹ï¼Ÿã€ã¨è³ªå•ã—ãŸã‚‰ã€ã§ããªã„ã‚“ã˜ã‚ƒãªã„ã‹ã£ã¦ç­”ãˆã ã£ãŸã€‚
æ°—æ¥½ã« Android + Akka ã‚„ã‚ŠãŸã„ã®ã§ç‰©ã¯è©¦ã—ã§ Maven ã§ä½¿ã£ã¦ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ã¦ã¿ãŸã‚‰ã€ãƒ¡ã‚½ãƒƒãƒ‰ãŒå¤šã™ãã‚‹ã¨ã‹ã§ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã§ããªã‹ã£ãŸã€‚

## C#ã‚’ä½¿ã£ã¦éåŒæœŸã®ãªã«ã‹
@AILight ã•ã‚“ãŒç™ºè¡¨ã—ã¦ãã‚Œã¾ã—ãŸã€‚
ç™ºè¡¨ä¸Šæ‰‹ã ãªãƒ¼ã¨æ€ã„ã¾ã—ãŸã€‚é¢ç™½ã‹ã£ãŸã§ã™ã€‚

æ˜”ã®PCã§ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°çµŒé¨“ã¨ã‹ã™ã”ã„ãƒ¬ã‚¢ãªã®ã§ã™ã”ã„é¢ç™½ã‹ã£ãŸã€‚
ä¸¦è¡Œå‡¦ç†ã¯ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã®é€²åŒ–ã¨å¯†æ¥ãªæ„Ÿã˜ãŒã™ã‚‹ã®ã§ã€ã“ã®è¾ºã‚‚é ­ã«å…¥ã‚Œã¦ãŠããŸã„å†…å®¹ã§ã™ã€‚

ã¼ããŒè§¦ã‚‹äº‹ãŒãªã„ C# ã«ã¤ã„ã¦ã¯ã„ã¤ã‚‚èˆˆå‘³ãŒã¤ããªã„ã€‚
Javaã‚‚ãã†ã ã‘ã©ã€ã‚ã£ãŸã‚‰ä¾¿åˆ©ã ã‚ã†ãªã¨ã„ã†æ©Ÿæ§‹ã¯ã ã„ãŸã„å®Ÿè£…ã•ã‚Œã¦ã¦ç¾¨ã¾ã—ã„ã€‚
ç‰¹ã«ã‚¹ãƒ¬ãƒƒãƒ‰ãƒ—ãƒ¼ãƒ«ã‚’ä½¿ã† Task ã‚¯ãƒ©ã‚¹ãŒã™ã¦ãã ã£ãŸã€‚
Objective-C ã§ã¯ Grand Central Dispatch ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒã“ã‚Œã«ã‚ãŸã‚‹ã¨æ€ã†ã€‚
ã‚„ã£ã±ã‚Šåˆ©ç”¨æ™‚ã«ã‚¹ãƒ¬ãƒƒãƒ‰ã®æ•°ã¨ã‹æ°—ã«ã—ãªãã¦è‰¯ã„ã®ã¯åŠ©ã‹ã‚Šã¾ã™ã€‚

ãã—ã¦é«˜é‡ã•ã‚“ã¯ç™½ããªã„

## ç™ºè¡¨ã«ã¯ãƒªãƒãƒ¼ã‚µãƒ«ã‚’

ç™ºè¡¨æ™‚ã«ãƒªãƒãƒ¼ã‚µãƒ«ã‚’ã™ã‚‹ã®ãŒã™ã”ãå¤§äº‹ã ãªã€ã¨æ€ã„ã¾ã—ãŸã€‚
çŒ«å‹ã•ã‚“ã®ç™ºè¡¨ã¯å†…å®¹ã¯ã‚‚ã¡ã‚ã‚“ã ã‘ã©ã€ç™ºè¡¨ãŒã™ã°ã‚‰ã—ã‹ã£ãŸã€‚
ãƒªãƒãƒ¼ã‚µãƒ«ã©ã“ã‚ã‹è³‡æ–™ã™ã‚‰ã¾ã¨ã‚‚ã«ã§ãã¦ãªã„ã¼ãã¯è«–å¤–ã§ã™ã€‚
æœ¬å½“ã«ã”ã‚ã‚“ãªã•ã„ã€‚
æ¬¡å›ã¯ç„¡ç†ã›ãšè³‡æ–™ãŒã§ãã¦ã‹ã‚‰ç™ºè¡¨ç™»éŒ²ã—ã‚ˆã†ã€‚

## ãŠã¾ã‘
### Rubyã®ã„ã‚ã„ã‚
ç‰¹ã« Ruby ã«é–¢ã™ã‚‹ç™ºè¡¨ã¯ãªã‹ã£ãŸã®ã ã‘ã© Ruby ã®è©±ãŒã„ãã¤ã‹å‡ºã¦ã„ã¾ã—ãŸã€‚

#### yield ãã‚‚ã„
Rubyã§ã¯éåŒæœŸã¨ã¯é–¢ä¿‚ãªã„ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã‚‚ yield ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã„ã¾ã™ã€‚(http://docs.ruby-lang.org/ja/1.9.3/doc/spec=2fcall.html#yield)

```ruby
# ruby
def foo
  yield(1,2)
end

p foo{|a,b| a+b } #=> 3
```

ãƒ¡ã‚½ãƒƒãƒ‰ã‹ã‚‰å‘¼ã³å‡ºã—å…ƒã«åˆ¶å¾¡ã‚’æˆ»ã™ã¨ã„ã†æ„å‘³ã§ã¯ä¼¼ã¦ã„ã‚‹ã®ã‹ã‚‚ã—ã‚Œãªã„ã‘ã©ã€ãªã‚“ã‹åˆ†ã‹ã‚Šã«ãã„ã§ã™ã­ã€‚

yieldã‚’ä½¿ã‚ãšã«æ˜ç¤ºçš„ã«ãƒ–ãƒ­ãƒƒã‚¯ã‚’å¼•æ•°ã¨ã—ã¦å–ã‚‹äº‹ã‚‚ã§ãã¾ã™ã€‚

```ruby
# ruby
def bar(&block)
  block.call(1,2)
end

p bar{|a,b| a+b } #=> 3
```


yield ã¯ä»–ã®ã„ãã¤ã‹ã®è¨€èªã«ãŠã„ã¦ã‚³ãƒ«ãƒ¼ãƒãƒ³ã§ä½¿ã‚ã‚Œã¦ã„ã‚‹ã®ã§ç´›ã‚‰ã‚ã—ã„ã¿ãŸã„ã§ã™ã€‚

```lua
-- lua
local colo = coroutine.create(
function()
  local i = 0
  while true do
    coroutine.yield(i)
    i = i+1
  end
end
)

for i=1, 10, 1 do
  local stat, ret = coroutine.resume( colo )
  print('--------')
  print(ret)
end
```

ruby ã¯ã‚³ãƒ«ãƒ¼ãƒãƒ³ã§ã‚‚ yield ä½¿ã„ã¾ã™ã€‚
```ruby
# ruby
f = Fiber.new do
  n = 0
  loop do
    Fiber.yield(n)
    n += 1
  end
end

10.times do
  p '---------'
  p f.resume
end
```

#### ActiveRecord ã¯ãƒ€ãƒ¡?
ã‚ã‚Œã€ã“ã‚Œä½•ã®è©±ã ã£ãŸã‹ãªï¼Ÿ
ActiveRecord ã¯ Rails ã«ã®ã‚‹ãŸã‚ã® ORM ã ã¨æ€ã†ã€‚1.2.3ãã‚‰ã„ã®ã“ã‚ã‹ã‚‰è¨€ã‚ã‚Œã¦ã„ã‚‹ã‘ã©ã€æ—¢å­˜ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«å½“ã¦ã¯ã‚ã‚ˆã†ã¨ã™ã‚‹ã¨ã—ã‚“ã©ã„ã€‚
[Sequel](http://sequel.jeremyevans.net) ã¨ã‹ä½¿ã†æ¡ˆã‚‚ã‚ã‚‹ã‚“ã ã‘ã©ã€ãã‚Œã¯ãã‚Œã§ã—ã‚“ã©ã„ã€‚

æ—¥ä»˜ã®å•é¡Œã¯ã‚ˆãåˆ†ã‹ã£ã¦ãªã„

* MySQL
    * DATETIME
    * DATE
    * TIMESTAMP 
    * TIME
    * YEAR
* PostgreSQL
    * timestamp (without time zone)
    * timestamp (with time zone)
    * date
    * time (without time zone)
    * time (with time zone)
    * interval
* SQLite
    * TEXT
    * REAL
    * INTEGER

å„DBã§ãƒ‡ãƒ¼ã‚¿ã‚¿ã‚¤ãƒ—ãŒç•°ãªã‚‹ã‹ã‚‰ã€ã—ã£ã‹ã‚Šãƒ†ã‚¹ãƒˆã¯æ›¸ã‹ãªãã‚ƒãªãƒ¼

#### æµ®å‹•å°æ•°ç‚¹ã§èª¤å·®å‡ºã‚‹ã®ã©ã†ãªã®ï¼Ÿ
Ruby ã®æµ®å‹•å°æ•°ç‚¹ã§èª¤å·®å‡ºã‚‹ã®ã©ã†ã™ã‚‹ã®ï¼Ÿã¿ãŸã„ãªè©±ãŒã‚ã£ãŸã¨æ€ã†ã‚“ã§ã™ã‘ã©ã€ã‚ã‚“ã¾ã‚Šè¦šãˆã¦ãªã„ã€‚
ãŸã¶ã‚“ã€

```ruby
#ruby
([0.1] * 10).inject(:+) #=> 0.9999999999999999
```

ã¿ãŸã„ã«ãªã‚‹è©±ã®ã“ã¨ã ã£ãŸã¨æ€ã†ã€‚
BigDecimalä½¿ãˆã°ã„ã„ã˜ã‚ƒã‚“ã€ã¿ãŸã„ãªè©±ã§çµ‚ã‚ã£ãŸã‚“ã§ã—ãŸã£ã‘ï¼Ÿï¼Ÿ

```ruby
#ruby
require 'bigdecimal'
([BigDecimal.new('0.1')] * 10).inject(:+).to_f #=> 1.0
```

ä»–ã«ã‚‚RationalãŒä½¿ãˆã¾ã™ã­ã€‚ruby2.1ã‹ã‚‰ã¯æ•°å€¤ãƒªãƒ†ãƒ©ãƒ«ä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

```ruby
([1/10r] * 10).inject(:+).to_f #=> 1.0
```

ä½¿ã„ã«ãã„ãªã€‚ã€‚ã€‚


ã¨ã“ã‚ã§ã€ãªã‚“ã§æµ®å‹•å°æ•°ç‚¹ã®è¶³ã—ç®—ã§èª¤å·®ãŒå‡ºã‚‹ã‹ã€ã¨ã„ã†ã®ã¯æµ®å‹•å°æ•°ç‚¹ã®ä»•çµ„ã¿ã‚’åˆ†ã‹ã£ã¦ã„ã‚‹äººã«ã¨ã£ã¦ã¯åˆ†ã‹ã‚‰ãªã„ã§ã‚‚ãªã„ä»•æ§˜ã§ã™ãŒã€Rubyã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å¼•ç”¨ã™ã‚‹ã¨

> æµ®å‹•å°æ•°ç‚¹æ•°ã®ã‚¯ãƒ©ã‚¹ã€‚Float ã®å®Ÿè£…ã¯ C è¨€èªã® double ã§ã€ãã®ç²¾åº¦ã¯ç’° å¢ƒã«ä¾å­˜ã—ã¾ã™ã€‚
> ä¸€èˆ¬ã«ã¯ã›ã„ãœã„15æ¡ã§ã™ã€‚è©³ã—ãã¯å¤šãã®ã‚·ã‚¹ãƒ†ãƒ ã§æ¡ç”¨ã•ã‚Œã¦ã„ã‚‹ æµ®å‹•å°æ•°ç‚¹æ¨™æº–è¦æ ¼ã€IEEE (Institute of Electrical and Electronics Engineers: ç±³å›½é›»æ°—é›»å­æŠ€è¡“è€…å”ä¼š) 754 ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚
>
> class Float: http://docs.ruby-lang.org/ja/2.1.0/class/Float.html

ã¨ã‚ã‚Šã¾ã™ã€‚

`Cè¨€èªã®double` ã¨è¨€ã‚ã‚Œã‚‹ã¨ã¼ããªã‚“ã‹ã¯ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã§åŒã˜çµæœã«ãªã‚‹ã‚ˆã†ãªæ°—ãŒã™ã‚‹ã‚“ã§ã™ãŒãªã‚Šã¾ã›ã‚“ã€‚

```c
//test.c
#include <stdio.h>

int main(int argc, char **argv) {
  double val;
  double sum = 0.0;
  printf("input: %s\n", argv[1]);
  sscanf(argv[1], "%lf\n", &val);
  printf("value: %lf\n", val);
  for(int i=0; i < 10; i++){
    sum += val;
  }

  printf("%lf\n", sum);
  return 0;
}

/*
$ clang test.c
$ ./a.out 0.1
input: 0.1
value: 0.100000
1.000000
*/

```

Rubyã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰èª­ã‚ã£ã¦è©±ã«ãªã‚‹ã‚“ã§ã™ãŒã€ãã“ã¾ã§èˆˆå‘³ãªã„ã®ã§ã“ã“ã¾ã§ã€‚


### çŒ«å‹ã•ã‚“ã¨é£²ã‚“ã 
ã„ã‚ã„ã‚è©±ã—ã¦ã¦é¢ç™½ã‹ã£ãŸã‚“ã§ã™ãŒã€èƒ¸ã«çªãåˆºã•ã£ãŸã®ã¯ã“ã‚Œã€‚(æ„è¨³)

![](https://pbs.twimg.com/media/Ax7qhVXCEAA6Avx.png)

ã€Œå›ã‹ã‚‰ã¯ã‚³ãƒ¼ãƒ‰ã®ã€ŒåŒ‚ã„ã€ãŒã—ãªã„ã€ã®ç”»åƒ(https://twitter.com/takejune/status/224874889801240577)

ãŒã‚“ã°ã£ã¦è¡¨ã«å‡ºã›ã‚‹ã‚³ãƒ¼ãƒ‰æ›¸ã‹ãªãã‚ƒãªã€‚

ä»–ã«ã‚‚ã„ã‚ã„ã‚ç¾¨ã¾ã—ã™ãã‚‹è©±ã‚’èã„ã¦å«‰å¦¬å¿ƒãŒãƒ¡ãƒ©ãƒ¡ãƒ©ç‡ƒãˆãŸã‚ã‘ã§ã™ãŒã€æœ€å¾Œã«è¨€ã„ãŸã„ã®ã¯ã€çŒ«å‹ã•ã‚“ãŒã€Œæ–‡ç³»å‡ºèº«ã€è¨€ã†ã®ãšã‚‹ã„ãªãƒ¼ã£ã¦æ€ã£ãŸã®ã¨ã€@hayajo ã•ã‚“ã¯ã‹ã£ã“è‰¯ã™ãã‚‹ãªãƒ¼ã¨æ€ã£ãŸã®ã¨ã€@civicã•ã‚“ã‚ã‚ŠãŒã¨ã†ã€Akkaã®åºƒå³¶å‹•ç”»è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã®4ç‚¹ã€‚

